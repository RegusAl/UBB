     1                                  ; Se da un fisier text. Sa se citeasca continutul fisierului, sa se determine caracterul special (diferit de litera) cu cea mai mare frecventa si sa se afiseze acel caracter, impreuna cu frecventa acestuia. Numele f
     2                                  bits 32
     3                                  global start
     4                                  
     5                                  extern exit, fopen, fread, fclose, printf
     6                                  import exit msvcrt.dll
     7                                  import fopen msvcrt.dll
     8                                  import fread msvcrt.dll
     9                                  import fclose msvcrt.dll
    10                                  import printf msvcrt.dll
    11                                  
    12                                  segment data use32 class=data
    13 00000000 6669736965722E7478-         nume_fisier db "fisier.txt", 0
    13 00000009 7400               
    14 0000000B FFFFFFFF                    descriptor_fisier dd -1
    15 0000000F 7200                        mod_acces db "r", 0
    16 00000011 436172616374657275-         format_afisare db "Caracterul special %c are frecventa %d", 0
    16 0000001A 6C207370656369616C-
    16 00000023 202563206172652066-
    16 0000002C 72656376656E746120-
    16 00000035 256400             
    17 00000038 00000000                    caractere_citite dd 0
    18 0000003C 00000000                    caracter dd 0
    19 00000040 00000000                    contor dd 0
    20                                      sir_litere equ 10
    21 00000044 <res 0000000A>              frecvente resb sir_litere
    22                                      len equ 100
    23 0000004E 00<rept>                    text times len db 0
    24 000000B2 7E6021402324255E26-         caractere_speciale db "~`!@#$%^&*()_+-={[}]\|:;'<,.>/?"
    24 000000BB 2A28295F2B2D3D7B5B-
    24 000000C4 7D5D5C7C3A3B273C2C-
    24 000000CD 2E3E2F3F           
    25                                  
    26                                  segment code use32 class=code
    27                                      start:
    28                                      
    29                                          ; deschidere fisier
    30 00000000 68[0F000000]                    push dword mod_acces
    31 00000005 68[00000000]                    push dword nume_fisier
    32 0000000A FF15[00000000]                  call [fopen]
    33 00000010 83C408                          add esp, 2*4
    34                                          
    35                                          ; verificare fisier
    36 00000013 A3[0B000000]                    mov [descriptor_fisier], eax
    37 00000018 83F800                          cmp eax, 0
    38 0000001B 0F849E000000                    je final
    39                                          
    40                                          repeta:
    41                                          
    42                                              ; citire fisier
    43 00000021 FF35[0B000000]                      push dword [descriptor_fisier]
    44 00000027 6A64                                push dword len
    45 00000029 6A01                                push dword 1
    46 0000002B 68[4E000000]                        push dword text
    47 00000030 FF15[00000000]                      call [fread]
    48 00000036 83C410                              add esp, 4*4
    49                                              
    50 00000039 83F800                              cmp eax, 0
    51 0000003C 7458                                je inchidere_fisier
    52                                              
    53 0000003E A3[38000000]                        mov [caractere_citite], eax
    54                                  
    55                                              ; parcurgerea caracterelor
    56 00000043 BE[4E000000]                        mov esi, text
    57                                              
    58                                              verificare: 
    59                                              
    60 00000048 AC                                      lodsb
    61                                                  
    62 00000049 3C00                                    cmp al, 0
    63 0000004B 7437                                    je done
    64                                                  
    65 0000004D B91F000000                              mov ecx, 31
    66                                                  
    67                                                  caractere_speciale_loop:
    68 00000052 3A81[B2000000]                              cmp al, [caractere_speciale+ecx]
    69 00000058 7404                                        je numarare                
    70 0000005A E2F6                                    loop caractere_speciale_loop
    71                                                  
    72 0000005C EBEA                                    jmp verificare
    73                                                  
    74                                                  numarare:
    75                                  
    76 0000005E BA01000000                              mov edx, 1
    77 00000063 0190[03000000]                          add [frecvente + eax - 'A'], edx
    78 00000069 3898[03000000]                          cmp [frecvente + eax - 'A'], bl
    79 0000006F 7C11                                    jl next
    80 00000071 8B98[03000000]                          mov ebx, [frecvente + eax - 'A']
    81 00000077 A3[3C000000]                            mov [caracter], eax
    82 0000007C 881D[40000000]                          mov [contor], bl
    83                                                  
    84                                                  next:
    85 00000082 EBC4                                        jmp verificare
    86                                                      
    87                                                  done:
    88 00000084 57                                          push edi
    89 00000085 BF[4E000000]                                mov edi, text
    90 0000008A 31C0                                        xor eax, eax
    91 0000008C B964000000                                  mov ecx, len
    92 00000091 F3AB                                        rep stosd
    93 00000093 5F                                          pop edi
    94                                                  
    95 00000094 EB8B                            jmp repeta
    96                                          
    97                                          inchidere_fisier:
    98                                          
    99                                              ; inchidem fisierul
   100 00000096 FF35[0B000000]                      push dword [descriptor_fisier]
   101 0000009C FF15[00000000]                      call [fclose]
   102 000000A2 83C404                              add esp, 1*4
   103                                          
   104                                          afisare:
   105                                          ; afisam litera si frecventa corespunzatoare
   106 000000A5 FF35[40000000]                  push dword [contor]
   107 000000AB FF35[3C000000]                  push dword [caracter]
   108 000000B1 68[11000000]                    push dword format_afisare
   109 000000B6 FF15[00000000]                  call [printf]
   110 000000BC 83C40C                          add esp, 3 * 4
   111                                      
   112                                      final:
   113                                      
   114 000000BF 6A00                        push dword 0
   115 000000C1 FF15[00000000]              call [exit]
