     1                                   ; Se da un nume de fisier (definit in segmentul de date). Sa se creeze un fisier cu numele dat, apoi sa se citeasca de la tastatura cuvinte pana cand se citeste de la tastatura caracterul '$'. Sa se scrie in fisier
     2                                  bits 32
     3                                  global start
     4                                  
     5                                  extern exit, fopen, fprintf, fclose, gets
     6                                  import exit msvcrt.dll
     7                                  import fopen msvcrt.dll
     8                                  import fprintf msvcrt.dll
     9                                  import fclose msvcrt.dll
    10                                  import gets msvcrt.dll
    11                                  
    12                                  segment data use32 class=data
    13 00000000 6669736965722E7478-         nume_fisier db "fisier.txt", 0
    13 00000009 7400               
    14 0000000B 7700                        mod_acces db "w", 0
    15 0000000D FFFFFFFF                    descriptor_fisier dd -1
    16 00000011 <res 0000001E>              cuvant resb 30
    17 0000002F 257300                      format_str db "%s", 0
    18 00000032 2000                        spatiu db " ", 0
    19                                  
    20                                  segment code use32 class=code
    21                                      start:
    22                                      
    23                                          ; deschidere fisier
    24 00000000 68[0B000000]                    push dword mod_acces
    25 00000005 68[00000000]                    push dword nume_fisier
    26 0000000A FF15[00000000]                  call [fopen]
    27 00000010 83C408                          add esp, 2*4
    28                                          
    29                                          ; verificare fisier
    30 00000013 A3[0D000000]                    mov [descriptor_fisier], eax
    31 00000018 83F800                          cmp eax, 0
    32 0000001B 7475                            je final
    33                                          
    34                                          repeta:
    35                                              
    36                                              ; citim cuvantul
    37 0000001D 68[11000000]                        push dword cuvant
    38 00000022 FF15[00000000]                      call [gets]
    39 00000028 83C404                              add esp, 1*4
    40                                              
    41                                              ; citim cuvinte pana dam de caracterul '$'
    42 0000002B 803D[11000000]24                    cmp byte [cuvant], '$'
    43 00000032 744F                                je gata
    44                                              
    45                                              ; vedem daca cel putin un caracter din cuvant este litera mica
    46 00000034 BE00000000                          mov esi, 0
    47                                              litera_mica:
    48 00000039 80BE[11000000]00                        cmp byte [cuvant+esi], 0
    49 00000040 743F                                    je peste
    50                                                  
    51 00000042 80BE[11000000]61                        cmp byte [cuvant+esi], 'a'
    52 00000049 7C33                                    jl nu_litera_mica
    53                                                  
    54 0000004B 80BE[11000000]7A                        cmp byte [cuvant+esi], 'z'
    55 00000052 7F2A                                    jg nu_litera_mica
    56                                                  
    57 00000054 68[11000000]                            push dword cuvant
    58 00000059 FF35[0D000000]                          push dword [descriptor_fisier]
    59 0000005F FF15[00000000]                          call [fprintf]
    60 00000065 83C408                                  add esp, 2*4
    61                                              
    62 00000068 68[32000000]                            push dword spatiu
    63 0000006D FF35[0D000000]                          push dword [descriptor_fisier]
    64 00000073 FF15[00000000]                          call [fprintf]
    65 00000079 83C408                                  add esp, 2*4
    66                                                  
    67 0000007C EB03                                    jmp peste
    68                                                  
    69                                                  nu_litera_mica:
    70 0000007E 46                                      inc(esi)
    71 0000007F EBB8                                jmp litera_mica
    72                                         
    73                                              peste:
    74                                  
    75 00000081 EB9A                            jmp repeta
    76                                          
    77                                          gata:
    78                                          
    79                                          ; inchidere fisier
    80 00000083 FF35[0D000000]                  push dword [descriptor_fisier]
    81 00000089 FF15[00000000]                  call [fclose]
    82 0000008F 83C404                          add esp, 1*4
    83                                          
    84                                      final:
    85                                      
    86 00000092 6A00                        push dword 0
    87 00000094 FF15[00000000]              call [exit]
