     1                                  ; Se da un nume de fisier (definit in segmentul de date). Sa se creeze un fisier cu numele dat, apoi sa se citeasca de la tastatura cuvinte si sa se scrie in fisier cuvintele citite pana cand se citeste de la tastat
     2                                  bits 32
     3                                  global start
     4                                  
     5                                  extern exit, fopen, fprintf, fclose, printf, scanf
     6                                  import exit msvcrt.dll
     7                                  import fopen msvcrt.dll
     8                                  import fprintf msvcrt.dll
     9                                  import fclose msvcrt.dll
    10                                  import printf msvcrt.dll
    11                                  import scanf msvcrt.dll
    12                                  
    13                                  segment data use32 class=data
    14 00000000 6669736965722E7478-         nume_fisier db "fisier.txt", 0
    14 00000009 7400               
    15 0000000B 7700                        mod_acces db "w", 0
    16 0000000D FFFFFFFF                    descriptor_fisier dd -1
    17 00000011 00                          caracter db 0
    18 00000012 256300                      format_char db "%c", 0
    19 00000015 446174692074657874-         mesaj db "Dati textul: ", 0
    19 0000001E 756C3A2000         
    20                                  
    21                                  
    22                                  
    23                                  segment code use32 class=code
    24                                      start:
    25                                      
    26                                          ; fopen
    27 00000000 68[0B000000]                    push dword mod_acces
    28 00000005 68[00000000]                    push dword nume_fisier
    29 0000000A FF15[00000000]                  call [fopen]
    30 00000010 83C408                          add esp, 2*4
    31                                          
    32                                          ; verificare fisier
    33 00000013 A3[0D000000]                    mov [descriptor_fisier], eax
    34 00000018 83F800                          cmp eax, 0
    35 0000001B 7453                            je final
    36                                          
    37                                          ; mesaj
    38 0000001D 68[15000000]                    push dword mesaj
    39 00000022 FF15[00000000]                  call [printf]
    40 00000028 83C404                          add esp, 1*4
    41                                          
    42                                      
    43                                          repeta:
    44                                          
    45 0000002B 60                                  pushad
    46 0000002C 68[11000000]                        push dword caracter
    47 00000031 68[12000000]                        push dword format_char
    48 00000036 FF15[00000000]                      call [scanf]
    49 0000003C 83C408                              add esp, 2*4
    50 0000003F 61                                  popad
    51                                              
    52 00000040 A0[11000000]                        mov al, [caracter]
    53                                              
    54 00000045 3C24                                cmp al, '$'
    55 00000047 7418                                je peste
    56                                              
    57 00000049 60                                  pushad
    58 0000004A 68[11000000]                        push dword caracter
    59 0000004F FF35[0D000000]                      push dword [descriptor_fisier]
    60 00000055 FF15[00000000]                      call [fprintf]
    61 0000005B 83C408                              add esp, 2*4
    62 0000005E 61                                  popad
    63                                              
    64 0000005F EBCA                            jmp repeta
    65                                          
    66                                          peste:
    67                                          ; inchidere fisier
    68 00000061 FF35[0D000000]                  push dword [descriptor_fisier]
    69 00000067 FF15[00000000]                  call [fclose]
    70 0000006D 83C404                          add esp, 1*4
    71                                      
    72                                      final:
    73                                      
    74 00000070 6A00                        push dword 0
    75 00000072 FF15[00000000]              call [exit]
