     1                                  ; Se da un fisier text. Sa se citeasca continutul fisierului, sa se determine litera mica (lowercase) cu cea mai mare frecventa si sa se afiseze acea litera, impreuna cu frecventa acesteia. Numele fisierului text es
     2                                  bits 32
     3                                  global start
     4                                  
     5                                  extern exit, fopen, fread, fclose, printf
     6                                  import exit msvcrt.dll
     7                                  import fopen msvcrt.dll
     8                                  import fread msvcrt.dll
     9                                  import fclose msvcrt.dll
    10                                  import printf msvcrt.dll
    11                                  
    12                                  segment data use32 class=data
    13 00000000 6669736965722E7478-         nume_fisier db "fisier.txt", 0
    13 00000009 7400               
    14 0000000B FFFFFFFF                    descriptor_fisier dd -1
    15 0000000F 7200                        mod_acces db "r", 0
    16 00000011 4C6974657261202563-         format_afisare db "Litera %c are frecventa %d", 0
    16 0000001A 206172652066726563-
    16 00000023 76656E746120256400 
    17 0000002C 00000000                    caractere_citite dd 0
    18 00000030 00000000                    litera dd 0
    19 00000034 00000000                    contor dd 0
    20                                      sir_litere equ 10
    21 00000038 <res 0000000A>              frecvente resb sir_litere
    22                                      len equ 100
    23 00000042 00<rept>                    text times len db 0
    24                                  
    25                                  segment code use32 class=code
    26                                      start:
    27                                      
    28                                          ; deschidere fisier
    29 00000000 68[0F000000]                    push dword mod_acces
    30 00000005 68[00000000]                    push dword nume_fisier
    31 0000000A FF15[00000000]                  call [fopen]
    32 00000010 83C408                          add esp, 2*4
    33                                          
    34                                          ; verificare fisier
    35 00000013 A3[0B000000]                    mov [descriptor_fisier], eax
    36 00000018 83F800                          cmp eax, 0
    37 0000001B 0F8495000000                    je final
    38                                          
    39                                          repeta:
    40                                          
    41                                              ; citire fisier
    42 00000021 FF35[0B000000]                      push dword [descriptor_fisier]
    43 00000027 6A64                                push dword len
    44 00000029 6A01                                push dword 1
    45 0000002B 68[42000000]                        push dword text
    46 00000030 FF15[00000000]                      call [fread]
    47 00000036 83C410                              add esp, 4*4
    48                                              
    49 00000039 83F800                              cmp eax, 0
    50 0000003C 744F                                je inchidere_fisier
    51                                              
    52 0000003E A3[2C000000]                        mov [caractere_citite], eax
    53                                  
    54                                              ; parcurgerea caracterelor
    55 00000043 BE[42000000]                        mov esi, text
    56                                              
    57                                              verificare: 
    58                                              
    59 00000048 AC                                      lodsb
    60                                                  
    61 00000049 3C00                                    cmp al, 0
    62 0000004B 742E                                    je done
    63                                                  
    64 0000004D 3C61                                    cmp al, 'a'
    65 0000004F 7CF7                                    jl verificare
    66                                                  
    67 00000051 3C7A                                    cmp al, 'z'
    68 00000053 7FF3                                    jg verificare
    69                                                  
    70 00000055 BA01000000                              mov edx, 1
    71 0000005A 0190[D7FFFFFF]                          add [frecvente + eax - 'a'], edx
    72 00000060 3898[D7FFFFFF]                          cmp [frecvente + eax - 'a'], bl
    73 00000066 7C11                                    jl next
    74 00000068 8B98[D7FFFFFF]                          mov ebx, [frecvente + eax - 'a']
    75 0000006E A3[30000000]                            mov [litera], eax
    76 00000073 881D[34000000]                          mov [contor], bl
    77                                                  
    78                                                  next:
    79 00000079 EBCD                                        jmp verificare
    80                                                      
    81                                                  done:
    82 0000007B 57                                          push edi
    83 0000007C BF[42000000]                                mov edi, text
    84 00000081 31C0                                        xor eax, eax
    85 00000083 B964000000                                  mov ecx, len
    86 00000088 F3AB                                        rep stosd
    87 0000008A 5F                                          pop edi
    88                                                  
    89 0000008B EB94                            jmp repeta
    90                                          
    91                                          inchidere_fisier:
    92                                          
    93                                              ; inchidem fisierul
    94 0000008D FF35[0B000000]                      push dword [descriptor_fisier]
    95 00000093 FF15[00000000]                      call [fclose]
    96 00000099 83C404                              add esp, 1*4
    97                                          
    98                                          afisare:
    99                                          ; afisam litera si frecventa corespunzatoare
   100 0000009C FF35[34000000]                  push dword [contor]
   101 000000A2 FF35[30000000]                  push dword [litera]
   102 000000A8 68[11000000]                    push dword format_afisare
   103 000000AD FF15[00000000]                  call [printf]
   104 000000B3 83C40C                          add esp, 3 * 4
   105                                      
   106                                      final:
   107                                      
   108                                      
   109                                      
   110 000000B6 6A00                        push dword 0
   111 000000B8 FF15[00000000]              call [exit]
