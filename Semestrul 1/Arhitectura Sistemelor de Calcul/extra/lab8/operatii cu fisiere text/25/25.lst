     1                                  ; Se dau un nume de fisier si un text (definite in segmentul de date). Textul contine litere mici, litere mari, cifre si caractere speciale. Sa se inlocuiasca toate spatiile din textul dat cu caracterul 'S'. Sa se c
     2                                  bits 32
     3                                  global start
     4                                  
     5                                  extern exit, fopen, fprintf, fclose
     6                                  import exit msvcrt.dll
     7                                  import fopen msvcrt.dll
     8                                  import fprintf msvcrt.dll
     9                                  import fclose msvcrt.dll
    10                                  
    11                                  segment data use32 class=data
    12 00000000 6669736965722E7478-         nume_fisier db "fisier.txt", 0
    12 00000009 7400               
    13 0000000B 7700                        mod_acces db "w", 0
    14 0000000D FFFFFFFF                    descriptor_fisier dd -1
    15 00000011 416E61206172652033-         text db "Ana are 34 mere. Ionut are 456 pere si 12 castane.", 0
    15 0000001A 34206D6572652E2049-
    15 00000023 6F6E75742061726520-
    15 0000002C 343536207065726520-
    15 00000035 736920313220636173-
    15 0000003E 74616E652E00       
    16                                      len equ ($-text)
    17 00000044 256300                      format_char db "%c", 0
    18 00000047 5300000000000000            caracter dd "S", 0
    19                                      
    20                                  segment code use32 class=code
    21                                      start:
    22                                      
    23                                          ; deschidere fisier
    24 00000000 68[0B000000]                    push dword mod_acces
    25 00000005 68[00000000]                    push dword nume_fisier
    26 0000000A FF15[00000000]                  call [fopen]
    27 00000010 83C408                          add esp, 2*4
    28                                          
    29                                          ; verificare fisier
    30 00000013 A3[0D000000]                    mov [descriptor_fisier], eax
    31 00000018 83F800                          cmp eax, 0
    32 0000001B 7457                            je final
    33                                          
    34 0000001D B933000000                      mov ecx, len
    35 00000022 BE00000000                      mov esi, 0
    36                                          repeta:
    37 00000027 51                                  push ecx
    38                                          
    39 00000028 80BE[11000000]20                    cmp byte [text+esi], ' '
    40 0000002F 7516                                jne peste
    41                                              
    42 00000031 68[47000000]                        push dword caracter
    43 00000036 FF35[0D000000]                      push dword [descriptor_fisier]
    44 0000003C FF15[00000000]                      call [fprintf]
    45 00000042 83C408                              add esp, 2*4
    46                                              
    47 00000045 EB1A                                jmp gata
    48                                              
    49                                              peste:
    50                                             
    51 00000047 FFB6[11000000]                      push dword [text+esi]
    52 0000004D 68[44000000]                        push dword format_char
    53 00000052 FF35[0D000000]                      push dword [descriptor_fisier]
    54 00000058 FF15[00000000]                      call [fprintf]
    55 0000005E 83C40C                              add esp, 3*4
    56                                  
    57                                              gata:
    58 00000061 46                                  inc(esi)
    59 00000062 59                                  pop ecx
    60                                          
    61 00000063 E2C2                            loop repeta
    62                                          
    63                                          
    64                                          ; inchidere fisier
    65 00000065 FF35[0D000000]                  push dword [descriptor_fisier]
    66 0000006B FF15[00000000]                  call [fclose]
    67 00000071 83C404                          add esp, 1*4
    68                                      
    69                                      final:
    70                                      
    71 00000074 6A00                        push dword 0
    72 00000076 FF15[00000000]              call [exit]
