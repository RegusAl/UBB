     1                                  ;  Se da un fisier text. Sa se citeasca continutul fisierului, sa se contorizeze numarul de litere 'y' si 'z' si sa se afiseze aceaste valori. Numele fisierului text este definit in segmentul de date. 
     2                                  bits 32
     3                                  global start
     4                                  
     5                                  extern exit, fopen, fclose, fread, printf
     6                                  import exit msvcrt.dll
     7                                  import fopen msvcrt.dll
     8                                  import fclose msvcrt.dll
     9                                  import fread msvcrt.dll
    10                                  import printf msvcrt.dll
    11                                  
    12                                  segment data use32 class=data
    13 00000000 6669736965722E7478-         nume_fisier db "fisier.txt", 0
    13 00000009 7400               
    14 0000000B 7200                        mod_acces db "r", 0
    15 0000000D FFFFFFFF                    descriptor_fisier dd -1
    16                                      len equ 100
    17 00000011 00<rept>                    text times len db 0
    18 00000075 00000000                    nr_y dd 0
    19 00000079 00000000                    nr_z dd 0
    20 0000007D 4E756D6172756C2064-         mesaj_y db "Numarul de litere 'y': %d ", 0
    20 00000086 65206C697465726520-
    20 0000008F 2779273A2025642000 
    21 00000098 4E756D6172756C2064-         mesaj_z db "Numarul de litere 'z': %d ", 0
    21 000000A1 65206C697465726520-
    21 000000AA 277A273A2025642000 
    22                                      
    23                                  segment code use32 class=code
    24                                      start:
    25                                      
    26                                          ; deschidere fisier
    27 00000000 68[0B000000]                    push dword mod_acces
    28 00000005 68[00000000]                    push dword nume_fisier
    29 0000000A FF15[00000000]                  call [fopen]
    30 00000010 83C408                          add esp, 2*4
    31                                          
    32                                          ; verificare fisier
    33 00000013 A3[0D000000]                    mov [descriptor_fisier], eax
    34 00000018 83F800                          cmp eax, 0
    35 0000001B 7476                            je final
    36                                          
    37                                          ; citire text din fisier
    38 0000001D FF35[0D000000]                  push dword [descriptor_fisier]
    39 00000023 6A64                            push dword len
    40 00000025 6A01                            push dword 1
    41 00000027 68[11000000]                    push dword text
    42 0000002C FF15[00000000]                  call [fread]
    43 00000032 83C410                          add esp, 4*4
    44                                          
    45                                          ; inchidere fisier
    46 00000035 FF35[0D000000]                  push dword [descriptor_fisier]
    47 0000003B FF15[00000000]                  call [fclose]
    48 00000041 83C404                          add esp, 1*4
    49                                          
    50 00000044 B964000000                      mov ecx, len
    51 00000049 BE[11000000]                    mov esi, text
    52                                          repeta:
    53 0000004E AC                                  lodsb
    54 0000004F 3C7A                                cmp al, 'z'
    55 00000051 7406                                je numara_Z
    56                                              
    57 00000053 3C79                                cmp al, 'y'
    58 00000055 740B                                je numara_Y
    59                                              
    60 00000057 EB10                                jmp peste
    61                                              
    62                                              numara_Z:
    63 00000059 8305[79000000]01                        add dword [nr_z], 1
    64 00000060 EB07                                    jmp peste
    65                                  
    66                                              numara_Y:
    67 00000062 8305[75000000]01                        add dword [nr_y], 1
    68                                                  
    69                                              peste:
    70                                              
    71                                          
    72 00000069 E2E3                            loop repeta
    73                                          
    74                                          ; afisare numar Z
    75 0000006B FF35[79000000]                  push dword [nr_z]
    76 00000071 68[98000000]                    push dword mesaj_z
    77 00000076 FF15[00000000]                  call [printf]
    78 0000007C 83C408                          add esp, 2*4
    79                                          
    80                                          ; afisare numar Y
    81 0000007F FF35[75000000]                  push dword [nr_y]
    82 00000085 68[7D000000]                    push dword mesaj_y
    83 0000008A FF15[00000000]                  call [printf]
    84 00000090 83C408                          add esp, 2*4
    85                                          
    86                                          
    87                                      final:
    88                                      
    89 00000093 6A00                        push dword 0
    90 00000095 FF15[00000000]              call [exit]
