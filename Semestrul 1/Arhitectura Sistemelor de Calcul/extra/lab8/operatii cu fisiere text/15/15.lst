     1                                  ; Se dau un nume de fisier si un text (definite in segmentul de date). Textul contine litere mici, litere mari, cifre si caractere speciale. Sa se inlocuiasca toate caracterele speciale din textul dat cu caracterul 
     2                                  bits 32
     3                                  global start        
     4                                  
     5                                  extern exit, fopen, fread, fclose, printf, fprintf               
     6                                  import exit msvcrt.dll    
     7                                  import fprintf msvcrt.dll                      
     8                                  import fopen msvcrt.dll  
     9                                  import fread msvcrt.dll
    10                                  import fclose msvcrt.dll
    11                                  import printf msvcrt.dll
    12                                  
    13                                  segment data use32 class=data
    14 00000000 636172616361746572-         nume_fisier_out db "caracatere_speciale_file.txt", 0  
    14 00000009 655F7370656369616C-
    14 00000012 655F66696C652E7478-
    14 0000001B 7400               
    15 0000001D 7700                        mod_acces_out db "w", 0         
    16 0000001F FFFFFFFF                    descriptor_fis_out dd -1   
    17 00000023 7E6021402324255E26-         caractere_speciale db "~`!@#$%^&*()_+-={[}]\|:;'<,.>/?", 0    
    17 0000002C 2A28295F2B2D3D7B5B-
    17 00000035 7D5D5C7C3A3B273C2C-
    17 0000003E 2E3E2F3F00         
    18 00000043 614E61212120615265-         text1 db "aNa!! aRe MERe *s*i* @#pere", 0
    18 0000004C 204D455265202A732A-
    18 00000055 692A20402370657265-
    18 0000005E 00                 
    19                                      len equ $-text1
    20 0000005F 00<rept>                    text2 times len db 0
    21                                      
    22                                  
    23                                  segment code use32 class=code
    24                                      start:          
    25                                          
    26 00000000 B91C000000                      mov ecx, len 
    27 00000005 E364                            jecxz final
    28                                          
    29 00000007 BE[43000000]                    mov esi, text1 
    30 0000000C BF[5F000000]                    mov edi, text2 
    31 00000011 FC                              cld 
    32                                          
    33                                          ; loop pentru a compara fiecare caracter din text 
    34                                          repeta:
    35                                          
    36 00000012 51                                  push ecx
    37 00000013 AC                                  lodsb
    38                                                  
    39 00000014 B91F000000                          mov ecx, 31
    40                                              caracter_special:
    41 00000019 3A81[23000000]                          cmp al, [caractere_speciale + ecx]
    42 0000001F 7404                                    je schimba_caracter
    43 00000021 E2F6                                loop caracter_special
    44                                              
    45 00000023 EB02                                jmp peste
    46                                              
    47                                              schimba_caracter:
    48 00000025 B058                                    mov al, 'X'
    49                                             
    50                                              peste:
    51                                              
    52 00000027 AA                                  stosb 
    53                                  
    54 00000028 59                                  pop ecx
    55                                              
    56 00000029 E2E7                            loop repeta 
    57                                          
    58                                          ; deschidere fisier
    59 0000002B 68[1D000000]                    push dword mod_acces_out     
    60 00000030 68[00000000]                    push dword nume_fisier_out
    61 00000035 FF15[00000000]                  call [fopen]
    62 0000003B 83C408                          add esp, 4*2               
    63                                  
    64                                          ; verificare fisier
    65 0000003E A3[1F000000]                    mov [descriptor_fis_out], eax   
    66                                          
    67 00000043 83F800                          cmp eax, 0
    68 00000046 7423                            je final
    69                                  
    70                                          ; textul se pune in fisier
    71 00000048 68[5F000000]                    push dword text2
    72 0000004D FF35[1F000000]                  push dword [descriptor_fis_out]
    73 00000053 FF15[00000000]                  call [fprintf]
    74 00000059 83C408                          add esp, 4*2
    75                                          
    76                                          ; inchidere fisier
    77 0000005C FF35[1F000000]                  push dword [descriptor_fis_out]
    78 00000062 FF15[00000000]                  call [fclose]
    79 00000068 83C404                          add esp, 4                 
    80                                          
    81                                        final:
    82 0000006B 6A00                            push dword 0   
    83 0000006D FF15[00000000]                  call [exit]
