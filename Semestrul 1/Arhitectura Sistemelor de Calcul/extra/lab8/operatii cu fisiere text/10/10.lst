     1                                  ;  Sa se citeasca de la tastatura un nume de fisier si un text. Sa se creeze un fisier cu numele dat in directorul curent si sa se scrie textul in acel fisier. Observatii: Numele de fisier este de maxim 30 de caract
     2                                  bits 32
     3                                  global start
     4                                  
     5                                  extern exit, printf, fopen, fclose, fprintf, scanf, gets
     6                                  import exit msvcrt.dll
     7                                  import printf msvcrt.dll
     8                                  import fopen msvcrt.dll
     9                                  import fclose msvcrt.dll
    10                                  import fprintf msvcrt.dll
    11                                  import scanf msvcrt.dll
    12                                  import gets msvcrt.dll
    13                                  
    14                                  segment data use32 class=data
    15 00000000 <res 0000001E>              nume_fisier resb 30
    16 0000001E 7700                        mod_acces db "w", 0
    17 00000020 FFFFFFFF                    descriptor_fisier dd -1
    18                                      len equ 130
    19 00000024 00<rept>                    text times len db "", 0
    20 000000A6 44617469206E756D65-         mesaj_fisier db "Dati numele fisierului: ", 0
    20 000000AF 6C6520666973696572-
    20 000000B8 756C75693A2000     
    21 000000BF 546578743A2000              mesaj_text db "Text: ", 0
    22 000000C6 257300                      format_scriere db "%s", 0
    23                                      
    24                                  segment code use32 class=code
    25                                      start:
    26                                      
    27                                          ; mesaj fisier
    28 00000000 68[A6000000]                    push dword mesaj_fisier
    29 00000005 FF15[00000000]                  call [printf]
    30 0000000B 83C404                          add esp, 1*4
    31                                          
    32                                          ; citire nume fisier
    33 0000000E 68[00000000]                    push dword nume_fisier
    34 00000013 FF15[00000000]                  call [gets]
    35 00000019 83C404                          add esp, 1*4
    36                                  
    37                                          ; mesaj text
    38 0000001C 68[BF000000]                    push dword mesaj_text
    39 00000021 FF15[00000000]                  call [printf]
    40 00000027 83C404                          add esp, 1*4
    41                                          
    42                                          ; citire text
    43 0000002A 68[24000000]                    push dword text
    44 0000002F FF15[00000000]                  call [gets]
    45 00000035 83C404                          add esp, 1*4
    46                                          
    47                                          ; fisier
    48 00000038 68[1E000000]                    push dword mod_acces
    49 0000003D 68[00000000]                    push dword nume_fisier
    50 00000042 FF15[00000000]                  call [fopen]
    51 00000048 83C408                          add esp, 2*4
    52                                          
    53                                          ; verificare fisier
    54 0000004B A3[20000000]                    mov [descriptor_fisier], eax
    55 00000050 83F800                          cmp eax, 0
    56 00000053 7423                            je final
    57                                          
    58                                          ; punere text in fisier
    59 00000055 68[24000000]                    push dword text
    60 0000005A FF35[20000000]                  push dword [descriptor_fisier]
    61 00000060 FF15[00000000]                  call [fprintf]
    62 00000066 83C408                          add esp, 2*4
    63                                          
    64                                          ; inchidere fisier
    65 00000069 FF35[20000000]                  push dword [descriptor_fisier]
    66 0000006F FF15[00000000]                  call [fclose]
    67 00000075 83C404                          add esp, 1*4
    68                                          
    69                                      final:
    70                                      
    71 00000078 6A00                        push dword 0
    72 0000007A FF15[00000000]              call [exit]
