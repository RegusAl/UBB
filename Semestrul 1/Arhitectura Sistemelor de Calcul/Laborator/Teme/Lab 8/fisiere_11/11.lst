     1                                  ; Se da un nume de fisier (definit in segmentul de date). Sa se creeze un fisier cu numele dat, apoi sa se citeasca de la tastatura cuvinte si sa se scrie in fisier cuvintele citite pana cand se citeste de la tastat
     2                                  bits 32
     3                                  global start
     4                                  
     5                                  extern exit, fopen, fprintf, fclose, gets, printf, scanf
     6                                  import exit msvcrt.dll
     7                                  import fopen msvcrt.dll
     8                                  import fprintf msvcrt.dll
     9                                  import fclose msvcrt.dll
    10                                  import gets msvcrt.dll
    11                                  import printf msvcrt.dll
    12                                  import scanf msvcrt.dll
    13                                  
    14                                  segment data use32 class=data
    15                                  
    16 00000000 74656D612E74787400          nume_fisier db "tema.txt", 0
    17 00000009 7700                        mod_acces db "w", 0
    18                                      ;text db "", 0
    19 0000000B 0000                        caracter db 0, 0
    20 0000000D 256300                      format db "%c", 0
    21 00000010 496E74726F64756365-         mesaj db "Introduceti cuvinte: ", 0
    21 00000019 746920637576696E74-
    21 00000022 653A2000           
    22 00000026 FFFFFFFF                    descriptor_fisier dd -1
    23                                      
    24 0000002A 45726F617265206C61-         mesaj_eroare db "Eroare la deschiderea fisierului"
    24 00000033 206465736368696465-
    24 0000003C 726561206669736965-
    24 00000045 72756C7569         
    25                                      
    26                                  segment code use32 class=code
    27                                      start:
    28                                      
    29                                          ; apelam fopen pentru a crea fisierul
    30                                          ; functia returnaza in EAX descriptorul fisierului sau 0 in caz de eroare
    31                                          ; eax = fopen(nume_fisier, mod_acces)
    32 00000000 68[09000000]                    push dword mod_acces
    33 00000005 68[00000000]                    push dword nume_fisier
    34 0000000A FF15[00000000]                  call [fopen]
    35 00000010 83C408                          add esp, 2*4
    36                                          
    37 00000013 A3[26000000]                    mov [descriptor_fisier], eax
    38                                          
    39 00000018 83F800                          cmp eax, 0
    40 0000001B 7455                            je eroare
    41                                          
    42 0000001D 68[10000000]                    push dword mesaj
    43 00000022 FF15[00000000]                  call [printf]
    44 00000028 83C404                          add esp, 1*4
    45                                          
    46                                          ; citim cate un caracter pana dam de "$"
    47                                          citire:
    48                                          
    49 0000002B 60                                  pushad 
    50 0000002C 68[0B000000]                        push dword caracter
    51 00000031 68[0D000000]                        push dword format
    52 00000036 FF15[00000000]                      call [scanf]
    53 0000003C 83C408                              add esp, 2*4
    54 0000003F 61                                  popad
    55                                              
    56 00000040 A0[0B000000]                        mov al, [caracter]
    57 00000045 3C24                                cmp al, '$'
    58 00000047 7418                                je peste
    59                                              
    60 00000049 60                                  pushad
    61 0000004A 68[0B000000]                        push dword caracter
    62 0000004F FF35[26000000]                      push dword [descriptor_fisier]
    63 00000055 FF15[00000000]                      call [fprintf]
    64 0000005B 83C408                              add esp, 4 * 2
    65 0000005E 61                                  popad
    66                                          
    67 0000005F EBCA                            jmp citire
    68                                          
    69                                          peste:
    70                                          
    71                                          ; fclose(descriptor_fisier)
    72 00000061 FF35[26000000]                  push dword [descriptor_fisier]
    73 00000067 FF15[00000000]                  call [fclose]
    74 0000006D 83C404                          add esp, 1*4
    75                                          
    76 00000070 EB0F                            jmp final
    77                                          eroare: 
    78 00000072 FF35[2A000000]                  push dword [mesaj_eroare]
    79 00000078 FF15[00000000]                  call [printf]
    80 0000007E 83C404                          add esp, 1*4
    81                                          
    82                                      final:
    83 00000081 6A00                        push dword 0
    84 00000083 FF15[00000000]              call [exit]
