     1                                  ; Se dau un nume de fisier si un text (definite in segmentul de date). Textul contine litere mici, litere mari, cifre si caractere speciale. Sa se transforme toate literele mari din textul dat in litere mici. Sa se 
     2                                  bits 32
     3                                  global start        
     4                                  
     5                                  extern exit, fopen, fread, fclose, printf, fprintf               
     6                                  import exit msvcrt.dll    
     7                                  import fprintf msvcrt.dll                      
     8                                  import fopen msvcrt.dll  
     9                                  import fread msvcrt.dll
    10                                  import fclose msvcrt.dll
    11                                  import printf msvcrt.dll
    12                                  
    13                                  segment data use32 class=data
    14 00000000 6C69746572655F6D69-         nume_fisier_out db "litere_mici.txt", 0  
    14 00000009 63692E74787400     
    15 00000010 7700                        mod_acces_out db "w", 0         
    16 00000012 FFFFFFFF                    descriptor_fis_out dd -1         
    17                                      len equ 100              
    18 00000016 614E6120615265204D-         text1 db "aNa aRe MERe si pere", 0
    18 0000001F 455265207369207065-
    18 00000028 726500             
    19 0000002B 00<rept>                    text2 times len db 0
    20                                  
    21                                  segment code use32 class=code
    22                                      start:          
    23                                          
    24 00000000 B964000000                      mov ecx, len 
    25 00000005 E35B                            jecxz final
    26                                          
    27 00000007 BE[16000000]                    mov esi, text1 
    28 0000000C BF[2B000000]                    mov edi, text2 
    29 00000011 FC                              cld 
    30                                          
    31                                          ; loop pentru a compara fiecare caracter din text 
    32                                          repeta:
    33                                          
    34 00000012 AC                                  lodsb 
    35 00000013 3C41                                cmp al, 'A'
    36 00000015 7C08                                jl peste
    37                                              
    38 00000017 3C5A                                cmp al, 'Z'
    39 00000019 7F04                                jg peste
    40                                              
    41 0000001B B320                                mov bl, 'a'-'A'
    42 0000001D 00D8                                add al, bl
    43                                              
    44                                              peste:
    45 0000001F AA                                  stosb 
    46                                              
    47 00000020 E2F0                            loop repeta 
    48                                          
    49                                          ; deschidere fisier
    50 00000022 68[10000000]                    push dword mod_acces_out     
    51 00000027 68[00000000]                    push dword nume_fisier_out
    52 0000002C FF15[00000000]                  call [fopen]
    53 00000032 83C408                          add esp, 4*2               
    54                                  
    55                                          ; verificare fisier
    56 00000035 A3[12000000]                    mov [descriptor_fis_out], eax   
    57                                          
    58 0000003A 83F800                          cmp eax, 0
    59 0000003D 7423                            je final
    60                                  
    61                                          ; textul se pune in fisier
    62 0000003F 68[2B000000]                    push dword text2
    63 00000044 FF35[12000000]                  push dword [descriptor_fis_out]
    64 0000004A FF15[00000000]                  call [fprintf]
    65 00000050 83C408                          add esp, 4*2
    66                                          
    67                                          ; inchidere fisier
    68 00000053 FF35[12000000]                  push dword [descriptor_fis_out]
    69 00000059 FF15[00000000]                  call [fclose]
    70 0000005F 83C404                          add esp, 4                 
    71                                          
    72                                        final:
    73 00000062 6A00                            push dword 0   
    74 00000064 FF15[00000000]                  call [exit]
