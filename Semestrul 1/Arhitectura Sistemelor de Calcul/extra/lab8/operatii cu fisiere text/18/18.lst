     1                                  ;  Se da un fisier text care contine litere, spatii si puncte. Sa se citeasca continutul fisierului, sa se determine numarul de cuvinte si sa se afiseze pe ecran aceasta valoare. (Se considera cuvant orice secventa 
     2                                  bits 32
     3                                  global start
     4                                  
     5                                  extern exit, fopen, fread, fclose, printf
     6                                  import exit msvcrt.dll
     7                                  import fopen msvcrt.dll
     8                                  import fread msvcrt.dll
     9                                  import fclose msvcrt.dll
    10                                  import printf msvcrt.dll
    11                                  
    12                                  segment data use32 class=data
    13 00000000 6669736965722E7478-         nume_fisier db "fisier.txt", 0
    13 00000009 7400               
    14 0000000B 7200                        mod_acces db "r", 0
    15 0000000D FFFFFFFF                    descriptor_fisier dd -1
    16                                      len equ 100
    17 00000011 00<rept>                    text times len db 0
    18 00000075 00000000                    nr_cuvinte dd 0
    19 00000079 256420637576696E74-         afisare db "%d cuvinte", 0
    19 00000082 6500               
    20                                      
    21                                  
    22                                  segment code use32 class=code
    23                                      start:
    24                                      
    25                                          ; deschidere fisier
    26 00000000 68[0B000000]                    push dword mod_acces
    27 00000005 68[00000000]                    push dword nume_fisier
    28 0000000A FF15[00000000]                  call [fopen]
    29 00000010 83C408                          add esp, 2*4
    30                                          
    31                                          ; verificare fisier
    32 00000013 A3[0D000000]                    mov [descriptor_fisier], eax
    33 00000018 83F800                          cmp eax, 0
    34 0000001B 7462                            je final
    35                                          
    36                                          ; citire text din fisier
    37 0000001D FF35[0D000000]                  push dword [descriptor_fisier]
    38 00000023 6A64                            push dword len
    39 00000025 6A01                            push dword 1
    40 00000027 68[11000000]                    push dword text
    41 0000002C FF15[00000000]                  call [fread]
    42 00000032 83C410                          add esp, 4*4
    43                                          
    44                                          ; inchidere fisier
    45 00000035 FF35[0D000000]                  push dword [descriptor_fisier]
    46 0000003B FF15[00000000]                  call [fclose]
    47 00000041 83C404                          add esp, 1*4
    48                                          
    49 00000044 BE[11000000]                    mov esi, text
    50 00000049 B300                            mov bl, 0
    51 0000004B FC                              cld
    52                                          repeta:
    53 0000004C AC                                  lodsb   ; al = text[esi]
    54                                              
    55 0000004D 3C00                                cmp al, 0
    56 0000004F 741A                                je gata
    57                                              
    58 00000051 80FB2E                              cmp bl, '.'
    59 00000054 7411                                je peste
    60                                              
    61 00000056 3C20                                cmp al, ' '
    62 00000058 7406                                je numara
    63                                              
    64 0000005A 3C2E                                cmp al, '.'
    65 0000005C 7402                                je numara
    66                                              
    67 0000005E EB07                                jmp peste
    68                                              
    69                                              numara:
    70 00000060 8305[75000000]01                        add dword [nr_cuvinte], 1
    71                                          
    72                                              peste:
    73 00000067 88C3                                mov bl, al
    74                                          
    75 00000069 EBE1                            jmp repeta
    76                                          
    77                                          gata:
    78                                          
    79 0000006B FF35[75000000]                  push dword [nr_cuvinte]
    80 00000071 68[79000000]                    push dword afisare
    81 00000076 FF15[00000000]                  call [printf]
    82 0000007C 83C408                          add esp, 2*4
    83                                          
    84                                      final:
    85                                      
    86 0000007F 6A00                        push dword 0
    87 00000081 FF15[00000000]              call [exit]
