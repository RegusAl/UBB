     1                                  ; Se da un nume de fisier (definit in segmentul de date). Sa se creeze un fisier cu numele dat, apoi sa se citeasca de la tastatura numere si sa se scrie din valorile citite in fisier numerele divizibile cu 7, pana 
     2                                  bits 32
     3                                  global start
     4                                  
     5                                  extern exit, fopen, fprintf, fclose, scanf
     6                                  import exit msvcrt.dll
     7                                  import fopen msvcrt.dll
     8                                  import fprintf msvcrt.dll
     9                                  import fclose msvcrt.dll
    10                                  import scanf msvcrt.dll
    11                                  
    12                                  segment data use32 class=data
    13 00000000 6669736965722E7478-         nume_fisier db "fisier.txt", 0
    13 00000009 7400               
    14 0000000B 7700                        mod_acces db "w", 0
    15 0000000D FFFFFFFF                    descriptor_fisier dd -1
    16 00000011 00000000                    numar dd 0
    17 00000015 25642000                    format_dec db "%d ", 0
    18                                  
    19                                  segment code use32 class=code
    20                                      start:
    21                                      
    22                                          ; deschidere fisier
    23 00000000 68[0B000000]                    push dword mod_acces
    24 00000005 68[00000000]                    push dword nume_fisier
    25 0000000A FF15[00000000]                  call [fopen]
    26 00000010 83C408                          add esp, 2*4
    27                                          
    28                                          ; verificare fisier
    29 00000013 A3[0D000000]                    mov [descriptor_fisier], eax
    30 00000018 83F800                          cmp eax, 0
    31 0000001B 7461                            je final
    32                                      
    33                                          repeta:
    34                                              
    35 0000001D 68[11000000]                        push dword numar
    36 00000022 68[15000000]                        push dword format_dec
    37 00000027 FF15[00000000]                      call [scanf]
    38 0000002D 83C408                              add esp, 2*4
    39                                              
    40 00000030 833D[11000000]00                    cmp dword [numar], 0
    41 00000037 7436                                je gata
    42                                              
    43 00000039 66A1[11000000]                      mov ax, [numar]
    44 0000003F 668B15[13000000]                    mov dx, [numar+2]
    45 00000046 66BB0700                            mov bx, 7
    46 0000004A 66F7F3                              div bx              ; ax = dx:ax / 7, dx = dx:ax % 7
    47                                              
    48 0000004D 6683FA00                            cmp dx, 0
    49 00000051 751A                                jne nu_divizibil
    50                                              
    51 00000053 FF35[11000000]                      push dword [numar]
    52 00000059 68[15000000]                        push dword format_dec
    53 0000005E FF35[0D000000]                      push dword [descriptor_fisier]
    54 00000064 FF15[00000000]                      call [fprintf]
    55 0000006A 83C40C                              add esp, 3*4
    56                                              
    57                                              nu_divizibil:
    58                                              
    59 0000006D EBAE                            jmp repeta
    60                                          
    61                                          gata:
    62 0000006F FF35[0D000000]                  push dword [descriptor_fisier]
    63 00000075 FF15[00000000]                  call [fclose]
    64 0000007B 83C404                          add esp, 1*4
    65                                      
    66                                      final:
    67                                      
    68 0000007E 6A00                        push dword 0
    69 00000080 FF15[00000000]              call [exit]
